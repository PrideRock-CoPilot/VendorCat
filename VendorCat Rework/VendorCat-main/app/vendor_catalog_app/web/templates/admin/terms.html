{% extends "base.html" %}

{% block head %}
  <link rel="stylesheet" href="/static/css/admin_portal.css">
{% endblock %}

{% block content %}
<div class="section-header">
  <div>
    <h1>User Agreement</h1>
    <p>Update the agreement users must accept before accessing the app.</p>
  </div>
</div>

{% include "admin/_nav.html" %}

<section class="card">
  <h2>Edit Agreement</h2>
  <p class="muted">Updating this content changes the agreement version and forces re-acceptance.</p>
  <form method="post" action="/admin/terms/save">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <label>Agreement Title
      <input type="text" name="title" value="{{ terms_title }}" maxlength="160" required>
    </label>
    <label>Effective Date
      <input type="text" name="effective_date" value="{{ terms_effective_date }}" maxlength="60" required>
    </label>
    <label>Agreement Body
      <textarea name="document_text" rows="18" required>{{ terms_document_text }}</textarea>
    </label>
    <p class="muted">Current version: <code>{{ terms_version }}</code></p>
    <div class="button-group">
      <button type="submit">Save Agreement</button>
      <a class="button-link subtle" href="/access/terms/view" target="_blank" rel="noopener noreferrer">Preview Public View</a>
    </div>
  </form>
</section>
{% endblock %}
